% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/db.R
\name{db_ops}
\alias{db_ops}
\title{Database Operations Class}
\description{
Database Operations Class

Database Operations Class
}
\details{
R6 Class for managing database operations related to survey data storage
and retrieval using PostgreSQL.

Creates a new table with appropriate column types based on the input data frame.
Also creates a timestamp trigger for tracking updates.

Handles connection pooling, transaction management, and error handling.
Ensures proper cleanup of database connections.

Updates an existing table with new data, adding new columns if necessary.
Automatically determines appropriate PostgreSQL data types.
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{session_id}}{Character. Unique identifier for the current session}

\item{\code{pool}}{Pool object. Database connection pool}

\item{\code{logger}}{survey_logger object. Logger instance for tracking operations}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-Database Operations-new}{\code{db_ops$new()}}
\item \href{#method-Database Operations-create_survey_data_table}{\code{db_ops$create_survey_data_table()}}
\item \href{#method-Database Operations-execute_db_operation}{\code{db_ops$execute_db_operation()}}
\item \href{#method-Database Operations-update_survey_data_table}{\code{db_ops$update_survey_data_table()}}
\item \href{#method-Database Operations-clone}{\code{db_ops$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Database Operations-new"></a>}}
\if{latex}{\out{\hypertarget{method-Database Operations-new}{}}}
\subsection{Method \code{new()}}{
Initialize a new Database Operations instance
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{db_ops$new(pool, session_id, logger)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{pool}}{Pool object. Database connection pool}

\item{\code{session_id}}{Character. Unique identifier for the current session}

\item{\code{logger}}{survey_logger object. Logger instance for tracking operations}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Database Operations-create_survey_data_table"></a>}}
\if{latex}{\out{\hypertarget{method-Database Operations-create_survey_data_table}{}}}
\subsection{Method \code{create_survey_data_table()}}{
Create a new survey data table in the database
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{db_ops$create_survey_data_table(write_table, data)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{write_table}}{Character. Name of the table to create}

\item{\code{data}}{data.frame. Data frame containing the schema for the new table}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Database Operations-execute_db_operation"></a>}}
\if{latex}{\out{\hypertarget{method-Database Operations-execute_db_operation}{}}}
\subsection{Method \code{execute_db_operation()}}{
Execute a database operation with transaction handling
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{db_ops$execute_db_operation(operation, error_message)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{operation}}{Function. The database operation to execute}

\item{\code{error_message}}{Character. Message to display if operation fails}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Database Operations-update_survey_data_table"></a>}}
\if{latex}{\out{\hypertarget{method-Database Operations-update_survey_data_table}{}}}
\subsection{Method \code{update_survey_data_table()}}{
Update an existing survey data table with new data
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{db_ops$update_survey_data_table(write_table, data)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{write_table}}{Character. Name of the table to update}

\item{\code{data}}{data.frame. Data frame containing the new data}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-Database Operations-clone"></a>}}
\if{latex}{\out{\hypertarget{method-Database Operations-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{db_ops$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
